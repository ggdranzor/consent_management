{"ast":null,"code":"var _jsxFileName = \"/home/philips/fabric/phr-app/src/components/Homepage.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withRouter } from \"react-router-dom\";\nimport { withAuth } from '@okta/okta-react';\nexport default withRouter(withAuth(class Homepage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      authenticated: null\n    };\n    this.checkAuthentication = this.checkAuthentication.bind(this);\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  async checkAuthentication() {\n    const authenticated = await this.props.auth.isAuthenticated();\n\n    if (authenticated !== this.state.authenticated) {\n      this.setState({\n        authenticated\n      });\n    }\n  }\n\n  async componentDidMount() {\n    this.checkAuthentication();\n  }\n\n  async componentDidUpdate() {\n    this.checkAuthentication();\n    this.props.auth.getUser().then(res => {\n      console.log(res.email);\n      const email = res.email;\n      fetch('https://dev-357341.okta.com/api/v1/users/' + email, {\n        method: 'get',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Custom-Allowed-Origin-Header-1': 'http://130.147.175.222:8092/Homepage',\n          Authorization: 'SSWS 00lVxvLE_yLY68atO_Qj6dKFcdvb0QqqPke4G_WYSC'\n        },\n        json: true\n      }).then(response => {\n        return response.json();\n      }).then(res => {\n        const usertype = res.profile.UserType;\n        console.log(res.profile.UserType);\n        if (usertype === 'Patient') this.props.history.push(\"/Patient/Dashboard\");else if (usertype !== 'Patient') this.props.history.push(\"/HomepageProvider\");\n        return usertype;\n      });\n      return res;\n    });\n  }\n\n  async login() {\n    this.props.auth.login('/');\n  }\n\n  async logout() {\n    this.props.auth.logout('/');\n  }\n\n  render() {\n    if (this.state.authenticated === null) return null;\n    const button = this.state.authenticated ? React.createElement(\"button\", {\n      onClick: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Logout\") : React.createElement(\"button\", {\n      onClick: this.login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Login\");\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Home\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: \"/protected\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Protected\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), button);\n  }\n\n}));","map":{"version":3,"sources":["/home/philips/fabric/phr-app/src/components/Homepage.js"],"names":["React","Component","Link","withRouter","withAuth","Homepage","constructor","props","state","authenticated","checkAuthentication","bind","login","logout","auth","isAuthenticated","setState","componentDidMount","componentDidUpdate","getUser","then","res","console","log","email","fetch","method","headers","Accept","Authorization","json","response","usertype","profile","UserType","history","push","render","button"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport {withRouter} from \"react-router-dom\";\nimport { withAuth } from '@okta/okta-react';\n\nexport default withRouter ( withAuth(class Homepage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { authenticated: null };\n    this.checkAuthentication = this.checkAuthentication.bind(this);\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  async checkAuthentication() {\n    const authenticated = await this.props.auth.isAuthenticated();\n    if (authenticated !== this.state.authenticated) {\n      this.setState({ authenticated });\n    }\n  }\n\n  async componentDidMount() {\n    this.checkAuthentication();\n    \n  }\n\n  async componentDidUpdate() {\n    this.checkAuthentication();\n    this.props.auth.getUser().then(res =>{\n      console.log(res.email);\n      const email = res.email;\n      fetch('https://dev-357341.okta.com/api/v1/users/'+email,{\n            method:'get',\n            headers:{\n              Accept: 'application/json',\n              'Content-Type': 'application/json',\n              'Access-Control-Allow-Origin':'*',\n              'Custom-Allowed-Origin-Header-1':'http://130.147.175.222:8092/Homepage',\n              Authorization: 'SSWS 00lVxvLE_yLY68atO_Qj6dKFcdvb0QqqPke4G_WYSC'        \n            },\n            json: true   \n          }).then(response => {\n            return response.json();    \n          }).then(res =>{\n            const usertype = res.profile.UserType;\n            console.log(res.profile.UserType);    \n            if (usertype === 'Patient' )\n              this.props.history.push(\"/Patient/Dashboard\");      \n            else if(usertype !== 'Patient') \n              this.props.history.push(\"/HomepageProvider\");     \n            return usertype; \n          }); \n          \n          return res;\n    });\n    \n    \n    \n  }\n\n  async login() {\n    this.props.auth.login('/');\n  }\n\n  async logout() {\n    this.props.auth.logout('/');\n  }\n \n  render() {\n    if (this.state.authenticated === null) return null;\n\n    const button = this.state.authenticated ?\n      <button onClick={this.logout}>Logout</button> :\n      <button onClick={this.login}>Login</button>;\n      \n    return (\n      <div>\n        <Link to='/'>Home</Link><br/>\n        <Link to='/protected'>Protected</Link><br/>\n        {button}\n       \n      </div>\n    );\n  }\n}));"]},"metadata":{},"sourceType":"module"}